package com.example.delhitransit;

import androidx.appcompat.app.AppCompatActivity;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import android.app.LoaderManager;
import android.content.Loader;
import android.os.Bundle;
import android.util.Log;

import java.util.List;

public class MainActivity extends AppCompatActivity implements LoaderManager.LoaderCallbacks<List<GtfsRealtime.FeedEntity>> {

    private static final String LOG_TAG = MainActivity.class.getSimpleName();

    private final String routes = ",108DOWN,3,0\n" +
            ",108STLDOWN,3,1\n" +
            ",108STLUp,3,2\n" +
            ",108UP,3,3\n" +
            ",185DOWN,3,4\n" +
            ",185LnkSTLDown,3,5\n" +
            ",185LnkSTLUp,3,6\n" +
            ",185STLDOWN,3,7\n" +
            ",185STLUP,3,8\n" +
            ",185UP,3,9\n" +
            ",234CL_DOWN,3,10\n" +
            ",234CL_UP,3,11\n" +
            ",262DOWN,3,12\n" +
            ",262LinkSTLDown,3,13\n" +
            ",262LinkSTLUP,3,14\n" +
            ",262UP,3,15\n" +
            ",78DOWN,3,16\n" +
            ",78STLDOWN,3,17\n" +
            ",78STLUP,3,18\n" +
            ",78UP,3,19\n" +
            ",7LnkSTLDown,3,20\n" +
            ",7LnkSTLUp,3,21\n" +
            ",813CLDown,3,22\n" +
            ",813CLUP,3,23\n" +
            ",813LnkSTLDown,3,24\n" +
            ",813LnkSTLUp,3,25\n" +
            ",937ADOWN,3,26\n" +
            ",937AUP,3,27\n" +
            ",982LnkSTLDown,3,28\n" +
            ",982LnkSTLUp,3,29\n" +
            ",185LSTL2Down,3,30\n" +
            ",185LSTL2Up,3,31\n" +
            ",185LSTLDown,3,32\n" +
            ",185LSTLUp,3,33\n" +
            ",206ADown,3,34\n" +
            ",206AUp,3,35\n" +
            ",211DOWN,3,36\n" +
            ",211UP,3,37\n" +
            ",253DOWN,3,38\n" +
            ",253UP,3,39\n" +
            ",258DOWN,3,40\n" +
            ",258STLDown,3,41\n" +
            ",258STLUp,3,42\n" +
            ",258UP,3,43\n" +
            ",348Down,3,44\n" +
            ",348Up,3,45\n" +
            ",971LnkSTLDown,3,46\n" +
            ",971LnkSTLUp,3,47\n" +
            ",578ADown,3,48\n" +
            ",578AUp,3,49\n" +
            ",578DOWN,3,50\n" +
            ",578LSTLDown,3,51\n" +
            ",578LSTLUp,3,52\n" +
            ",578UP,3,53\n" +
            ",708_Down,3,54\n" +
            ",708_Up,3,55\n" +
            ",708ADown,3,56\n" +
            ",708AUp,3,57\n" +
            ",708STLDown,3,58\n" +
            ",708STLUp,3,59\n" +
            ",719ADOWN,3,60\n" +
            ",719AUP,3,61\n" +
            ",719DOWN,3,62\n" +
            ",719STLDown,3,63\n" +
            ",719STLUp,3,64\n" +
            ",719UP,3,65\n" +
            ",720DOWN,3,66\n" +
            ",720UP,3,67\n" +
            ",723Down,3,68\n" +
            ",723Up,3,69\n" +
            ",743ADown,3,70\n" +
            ",743ASTLUp,3,71\n" +
            ",743AUp,3,72\n" +
            ",743Down,3,73\n" +
            ",743STLDown,3,74\n" +
            ",743STLUp,3,75\n" +
            ",743Up,3,76\n" +
            ",745ADown,3,77\n" +
            ",745DOWN,3,78\n" +
            ",745EUp,3,79\n" +
            ",745STLDown,3,80\n" +
            ",745STLUp,3,81\n" +
            ",745UP,3,82\n" +
            ",753DOWN,3,83\n" +
            ",753UP,3,84\n" +
            ",764DOWN,3,85\n" +
            ",764MPSTLDown,3,86\n" +
            ",764MPSTLUp,3,87\n" +
            ",764MVSTLDown,3,88\n" +
            ",764MVSTLUp,3,89\n" +
            ",764SDown,3,90\n" +
            ",764SUp,3,91\n" +
            ",764UP,3,92\n" +
            ",770ADOWN,3,93\n" +
            ",770ALTDDown,3,94\n" +
            ",770ALTDUp,3,95\n" +
            ",770AUp,3,96\n" +
            ",770BDown,3,97\n" +
            ",770BUp,3,98\n" +
            ",774Down,3,99\n" +
            ",774STLDown,3,100\n" +
            ",774STLUp,3,101\n" +
            ",774Up,3,102\n" +
            ",775ADown,3,103\n" +
            ",775AUp,3,104\n" +
            ",778DOWN,3,105\n" +
            ",778UP,3,106\n" +
            ",790+825Up,3,107\n" +
            ",790+876UP,3,108\n" +
            ",790ADOWN,3,109\n" +
            ",790AUP,3,110\n" +
            ",790BDown,3,111\n" +
            ",790BUp,3,112\n" +
            ",790DOWN,3,113\n" +
            ",790STLDown,3,114\n" +
            ",790STLUp,3,115\n" +
            ",790UP,3,116\n" +
            ",824SSTLDown,3,117\n" +
            ",824SSTLUp,3,118\n" +
            ",824STLDown,3,119\n" +
            ",824STLUp,3,120\n" +
            ",825+790Down,3,121\n" +
            ",825STLDown,3,122\n" +
            ",825STLUp,3,123\n" +
            ",836AUp,3,124\n" +
            ",836DOWN,3,125\n" +
            ",836LSTLDown,3,126\n" +
            ",836LSTLUp,3,127\n" +
            ",836STLDown,3,128\n" +
            ",836STLUP,3,129\n" +
            ",836UP,3,130\n" +
            ",838ADown,3,131\n" +
            ",838DOWN,3,132\n" +
            ",838UP,3,133\n" +
            ",840Down,3,134\n" +
            ",840STLDown,3,135\n" +
            ",840STLUP,3,136\n" +
            ",840Up,3,137\n" +
            ",876+790Down,3,138\n" +
            ",876STLDOWN,3,139\n" +
            ",876STLUP,3,140\n" +
            ",878_Down,3,141\n" +
            ",878_Up,3,142\n" +
            ",878+578LTD_Down,3,143\n" +
            ",878+578LTD_Up,3,144\n" +
            ",878STLDown,3,145\n" +
            ",878STLUp,3,146\n" +
            ",891DOWN,3,147\n" +
            ",891STLDown,3,148\n" +
            ",891STLUp,3,149\n" +
            ",891UP,3,150\n" +
            ",893DOWN,3,151\n" +
            ",893UP,3,152\n" +
            ",911ADown,3,153\n" +
            ",911AUp,3,154\n" +
            ",978STLDown,3,155\n" +
            ",LTD_Up,3,156\n" +
            ",239Down,3,157\n" +
            ",239Up,3,158\n" +
            ",311ADown,3,159\n" +
            ",311AUp,3,160\n" +
            ",336ADown,3,161\n" +
            ",336AUp,3,162\n" +
            ",33LnkSTLDown,3,163\n" +
            ",33LnkSTLUp,3,164\n" +
            ",33LSTLDown,3,165\n" +
            ",33LSTLUp,3,166\n" +
            ",534DOWN,3,167\n" +
            ",534UP,3,168\n" +
            ",543ADown,3,169\n" +
            ",543AUp,3,170\n" +
            ",611BDOWN,3,171\n" +
            ",611BUP,3,172\n" +
            ",611DOWN,3,173\n" +
            ",611UP,3,174\n" +
            ",623DOWN,3,175\n" +
            ",623EXT UP,3,176\n" +
            ",623EXTDN,3,177\n" +
            ",623UP,3,178\n" +
            ",GL23Down,3,179\n" +
            ",GL23Up,3,180\n" +
            ",578STLDOWN,3,181\n" +
            ",578STLUP,3,182\n" +
            ",588DOWN,3,183\n" +
            ",588UP,3,184\n" +
            ",711DOWN,3,185\n" +
            ",711UP,3,186\n" +
            ",712Down,3,187\n" +
            ",712Up,3,188\n" +
            ",724DOWN,3,189\n" +
            ",724EXTUP,3,190\n" +
            ",724UP,3,191\n" +
            ",728ADown,3,192\n" +
            ",728AUp,3,193\n" +
            ",728EDown,3,194\n" +
            ",728EUp,3,195\n" +
            ",728STLUp,3,196\n" +
            ",729DOWN,3,197\n" +
            ",729UP,3,198\n" +
            ",740ExtDOWN,3,199\n" +
            ",740ExtUP,3,200\n" +
            ",761DOWN,3,201\n" +
            ",761UP,3,202\n" +
            ",764LinkstlDN,3,203\n" +
            ",764LnkSTLUp,3,204\n" +
            ",807ADown,3,205\n" +
            ",807AUp,3,206\n" +
            ",808Down,3,207\n" +
            ",808UP,3,208\n" +
            ",810DOWN,3,209\n" +
            ",810UP,3,210\n" +
            ",816ADOWN,3,211\n" +
            ",816AUP,3,212\n" +
            ",816Down,3,213\n" +
            ",816ExtDown,3,214\n" +
            ",816Up,3,215\n" +
            ",817ADown,3,216\n" +
            ",817AUp,3,217\n" +
            ",817BDown,3,218\n" +
            ",817BUp,3,219\n" +
            ",817Down,3,220\n" +
            ",817LnkSTLDown,3,221\n" +
            ",817LnkSTLUp,3,222\n" +
            ",817Up,3,223\n" +
            ",824LnkSTLDown,3,224\n" +
            ",824LnkSTLUp,3,225\n" +
            ",827LnkSTLUp,3,226\n" +
            ",827STLDown,3,227\n" +
            ",827STLUp,3,228\n" +
            ",832DOWN,3,229\n" +
            ",832LinkSTLDOWN,3,230\n" +
            ",832LinkSTLUP,3,231\n" +
            ",832UP,3,232\n" +
            ",833ADown,3,233\n" +
            ",833AUp,3,234\n" +
            ",833LnkSTLDown,3,235\n" +
            ",833LnkSTLUp,3,236\n" +
            ",835DOWN,3,237\n" +
            ",835STLDOWN,3,238\n" +
            ",835STLUP,3,239\n" +
            ",835UP,3,240\n" +
            ",850Down,3,241\n" +
            ",850EDown,3,242\n" +
            ",850LTDDown,3,243\n" +
            ",850LTDUp,3,244\n" +
            ",850STLDown,3,245\n" +
            ",850STLUp,3,246\n" +
            ",850Up,3,247\n" +
            ",874DOWN,3,248\n" +
            ",874UP,3,249\n" +
            ",883ADOWN,3,250\n" +
            ",883B_LTD_Down,3,251\n" +
            ",883DOWN,3,252\n" +
            ",883ExtDown,3,253\n" +
            ",883ExtUp,3,254\n" +
            ",883UP,3,255\n" +
            ",972DOWN,3,256\n" +
            ",972EXTDOWN,3,257\n" +
            ",972EXTUP,3,258\n" +
            ",972UP,3,259\n" +
            ",978ADOWN,3,260\n" +
            ",978AUP,3,261\n" +
            ",978EDown,3,262\n" +
            ",978EUp,3,263\n" +
            ",114+182A_D,3,264\n" +
            ",114+990_DN,3,265\n" +
            ",114+990_UP,3,266\n" +
            ",114+990E_D,3,267\n" +
            ",114+990E_U,3,268\n" +
            ",114ST+901D,3,269\n" +
            ",182ACLSTLU,3,270\n" +
            ",182ADOWN,3,271\n" +
            ",182AUP,3,272\n" +
            ",219ExtDown,3,273\n" +
            ",219ExtUp,3,274\n" +
            ",219STLDown,3,275\n" +
            ",219STLUP,3,276\n" +
            ",234CLEDown,3,277\n" +
            ",234CLEUp,3,278\n" +
            ",901CLDOWN,3,279\n" +
            ",901CLUP,3,280\n" +
            ",901DOWN,3,281\n" +
            ",901STLCLUP,3,282\n" +
            ",901UP,3,283\n" +
            ",921CLDown,3,284\n" +
            ",921CLUp,3,285\n" +
            ",921EUP,3,286\n" +
            ",921STLUp,3,287\n" +
            ",927EXTDown,3,288\n" +
            ",927EXTUp,3,289\n" +
            ",927STLDown,3,290\n" +
            ",927STLUp,3,291\n" +
            ",929ADown,3,292\n" +
            ",929AUp,3,293\n" +
            ",929DOWN,3,294\n" +
            ",929LSTLDown,3,295\n" +
            ",929LSTLUP,3,296\n" +
            ",929UP,3,297\n" +
            ",938ACLDown,3,298\n" +
            ",938ACLUp,3,299\n" +
            ",938LinkStlUp,3,300\n" +
            ",938LnkStlDown,3,301\n" +
            ",962ExtCLDn,3,302\n" +
            ",962ExtCLUP,3,303\n" +
            ",962STLDown,3,304\n" +
            ",962STLUp,3,305\n" +
            ",990CLDOWN,3,306\n" +
            ",990CLUP,3,307\n" +
            ",990E_CL_DN,3,308\n" +
            ",990E_CL_UP,3,309\n" +
            ",TMS+Punjabi Bagh,3,310\n" +
            ",TMS-PBagh,3,311\n" +
            ",101BDown,3,312\n" +
            ",101BUp,3,313\n" +
            ",101ExtDown,3,314\n" +
            ",101ExtUp,3,315\n" +
            ",400DOWN,3,316\n" +
            ",400UP,3,317\n" +
            ",402CLDown,3,318\n" +
            ",402CLUp,3,319\n" +
            ",403CLDown,3,320\n" +
            ",403CLUp,3,321\n" +
            ",403STLDown,3,322\n" +
            ",403STLUp,3,323\n" +
            ",404DOWN,3,324\n" +
            ",404LinkSTLUP,3,325\n" +
            ",404UP,3,326\n" +
            ",405ADOWN,3,327\n" +
            ",405ASTLDOWN,3,328\n" +
            ",405ASTLUP,3,329\n" +
            ",405AUP,3,330\n" +
            ",405DOWN,3,331\n" +
            ",405UP,3,332\n" +
            ",418ADown,3,333\n" +
            ",418ALnkSTLDown,3,334\n" +
            ",418ALnkSTLUp,3,335\n" +
            ",418AUp,3,336\n" +
            ",418EXTDOWN,3,337\n" +
            ",418EXTUP,3,338\n" +
            ",425CLDown,3,339\n" +
            ",425CLUp,3,340\n" +
            ",425STLDown,3,341\n" +
            ",425STLUp,3,342\n" +
            ",429CLDown,3,343\n" +
            ",429CLUp,3,344\n" +
            ",429LSTLUp,3,345\n" +
            ",429STLDown,3,346\n" +
            ",429STLDown2,3,347\n" +
            ",429STLUp,3,348\n" +
            ",429STLUp2,3,349\n" +
            ",433CLDown,3,350\n" +
            ",433CLUp,3,351\n" +
            ",433STLDown,3,352\n" +
            ",433STLUp,3,353\n" +
            ",445ADown,3,354\n" +
            ",445AUp,3,355\n" +
            ",445STLDown,3,356\n" +
            ",445STLUp,3,357\n" +
            ",448CLDown,3,358\n" +
            ",448CLUP,3,359\n" +
            ",448EXTUP,3,360\n" +
            ",448STLUp,3,361\n" +
            ",449CLDown,3,362\n" +
            ",449CLUP,3,363\n" +
            ",460CLDOWN,3,364\n" +
            ",460CLUP,3,365\n" +
            ",460STL_DN,3,366\n" +
            ",460STL_UP,3,367\n" +
            ",460STLDOWN,3,368\n" +
            ",460STLUP,3,369\n" +
            ",460UP,3,370\n" +
            ",473CLDN,3,371\n" +
            ",473CLUP,3,372\n" +
            ",479ACLDown,3,373\n" +
            ",479ACLUp,3,374\n" +
            ",479CLDown,3,375\n" +
            ",479CLUp,3,376\n" +
            ",479STLDown,3,377\n" +
            ",479STLUp,3,378\n" +
            ",480DOWN,3,379\n" +
            ",480UP,3,380\n" +
            ",507CLDown,3,381\n" +
            ",507CLUp,3,382\n" +
            ",507STLDown,3,383\n" +
            ",507STLUp,3,384\n" +
            ",522CLDOWN,3,385\n" +
            ",522CLUP,3,386\n" +
            ",522STLDown,3,387\n" +
            ",522STLUp,3,388\n" +
            ",543STLDown,3,389\n" +
            ",543STLUp,3,390\n" +
            ",47ACLDOWN,3,391\n" +
            ",47ACLUP,3,392\n" +
            ",47ALnkSTLDown,3,393\n" +
            ",47ALnkSTLUp,3,394\n" +
            ",511ASTLDown,3,395\n" +
            ",511ASTLUP,3,396\n" +
            ",540ACLDown,3,397\n" +
            ",540ACLUp,3,398\n" +
            ",540CLDown,3,399\n" +
            ",540CLUp,3,400\n" +
            ",540STLDown,3,401\n" +
            ",540STLUp,3,402\n" +
            ",548CLDOWN,3,403\n" +
            ",548CLUP,3,404\n" +
            ",548ExtDown,3,405\n" +
            ",548ExtUp,3,406\n" +
            ",717ADOWN,3,407\n" +
            ",717AUP,3,408\n" +
            ",411LnkSTLDown,3,409\n" +
            ",411LnkSTLUp,3,410\n" +
            ",433LnkSTLDown,3,411\n" +
            ",433LnkSTLUp,3,412\n" +
            ",717DOWN,3,413\n" +
            ",717UP,3,414\n" +
            ",764ExtDOWN,3,415\n" +
            ",764ExtUP,3,416\n" +
            ",780DOWN,3,417\n" +
            ",780UP,3,418\n" +
            ",781DOWN,3,419\n" +
            ",781UP,3,420\n" +
            ",794Down,3,421\n" +
            ",794UP,3,422\n" +
            ",RL-77DOWN,3,423\n" +
            ",RL-77UP,3,424\n" +
            ",157ADown,3,425\n" +
            ",157AUp,3,426\n" +
            ",157STLDown,3,427\n" +
            ",157STLUP,3,428\n" +
            ",165DOWN,3,429\n" +
            ",165UP,3,430\n" +
            ",212ADown,3,431\n" +
            ",212AUp,3,432\n" +
            ",212DOWN,3,433\n" +
            ",212UP,3,434\n" +
            ",236DOWN,3,435\n" +
            ",236UP,3,436\n" +
            ",261Down,3,437\n" +
            ",261LnkSTLDown,3,438\n" +
            ",261LnkSTLUp,3,439\n" +
            ",261Up,3,440\n" +
            ",309EXTDOWN,3,441\n" +
            ",309EXTUP,3,442\n" +
            ",331LnkSTLDown,3,443\n" +
            ",331LnkSTLUp,3,444\n" +
            ",419LSTLDown,3,445\n" +
            ",419LSTLUp,3,446\n" +
            ",73LNKSTLDown,3,447\n" +
            ",73LnkSTLUp,3,448\n" +
            ",85DOWN,3,449\n" +
            ",85UP,3,450\n" +
            ",871ADown,3,451\n" +
            ",871AUp,3,452\n" +
            ",871DOWN,3,453\n" +
            ",871UP,3,454\n" +
            ",125ExtDown,3,455\n" +
            ",125ExtUp,3,456\n" +
            ",143DOWN,3,457\n" +
            ",143UP,3,458\n" +
            ",205DOWN,3,459\n" +
            ",205LSTLDown,3,460\n" +
            ",205LSTLUp,3,461\n" +
            ",205UP,3,462\n" +
            ",208Down,3,463\n" +
            ",208LnkSTLDown,3,464\n" +
            ",208LnkSTLUp,3,465\n" +
            ",208Up,3,466\n" +
            ",221DOWN,3,467\n" +
            ",221UP,3,468\n" +
            ",246CLDown,3,469\n" +
            ",246CLUp,3,470\n" +
            ",310DOWN,3,471\n" +
            ",310UP,3,472\n" +
            ",336ALnkSTLDown,3,473\n" +
            ",336ALnkSTLUp,3,474\n" +
            ",73DOWN,3,475\n" +
            ",73UP,3,476\n" +
            ",847DOWN,3,477\n" +
            ",847UP,3,478\n" +
            ",85ExtDown,3,479\n" +
            ",85ExtUp,3,480\n" +
            ",88ADown,3,481\n" +
            ",88AUp,3,482\n" +
            ",932ADown,3,483\n" +
            ",932AUp,3,484\n" +
            ",997Down,3,485\n" +
            ",997Up,3,486\n" +
            ",181ADown,3,487\n" +
            ",181AUp,3,488\n" +
            ",214CLDOWN,3,489\n" +
            ",214CLUP,3,490\n" +
            ",405STLDown,3,491\n" +
            ",405STLUP,3,492\n" +
            ",408CLDown,3,493\n" +
            ",408CLUp,3,494\n" +
            ",408EXTCLDown,3,495\n" +
            ",408EXTCLUp,3,496\n" +
            ",408STLDown,3,497\n" +
            ",408STLUp,3,498\n" +
            ",410ACLUp,3,499\n" +
            ",410CLDown,3,500\n" +
            ",410CLUp,3,501\n" +
            ",410STL2DOWN,3,502\n" +
            ",410STL2UP,3,503\n" +
            ",410StlDown,3,504\n" +
            ",410StlUp,3,505\n" +
            ",411STLDN,3,506\n" +
            ",411STLDOWN,3,507\n" +
            ",450LnkSTLDown,3,508\n" +
            ",450LnkSTLUp,3,509\n" +
            ",457STLDOWN,3,510\n" +
            ",457STLUP,3,511\n" +
            ",47ASTL2Up,3,512\n" +
            ",624ACLDown,3,513\n" +
            ",624ACLUP,3,514\n" +
            ",624ALinkSTLDown,3,515\n" +
            ",624ALinkSTLUP,3,516\n" +
            ",624BLnkSTLDown,3,517\n" +
            ",624BLnkSTLUp,3,518\n" +
            ",803CLDown,3,519\n" +
            ",803CLUp,3,520\n" +
            ",805ADown,3,521\n" +
            ",805AUp,3,522\n" +
            ",894CLDown,3,523\n" +
            ",894CLUp,3,524\n" +
            ",894STLDown,3,525\n" +
            ",894STLUp,3,526\n" +
            ",91DOWN,3,527\n" +
            ",91LinkSTLDown,3,528\n" +
            ",91LinkSTLUP,3,529\n" +
            ",91UP,3,530\n" +
            ",TMS(+)LajpatNagar,3,531\n" +
            ",TMS+AL,3,532\n" +
            ",TMS+Lajpat-Azadpur,3,533\n" +
            ",TMS-Azadpur-Lajpat,3,534\n" +
            ",TMS-LajpatNagar,3,535\n" +
            ",TMS-LajpatNgr-AzadpurTerminal,3,536\n" +
            ",721DOWN,3,537\n" +
            ",721UP,3,538\n" +
            ",727DOWN,3,539\n" +
            ",727UP,3,540\n" +
            ",751Down,3,541\n" +
            ",751Up,3,542\n";


    private static BusListAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        RecyclerView busListView = findViewById(R.id.bus_list);
        busListView.setLayoutManager(new LinearLayoutManager(this));
        adapter = new BusListAdapter(null);
        busListView.setAdapter(adapter);

        getLoaderManager().initLoader(2924, null, this);

        Log.v(LOG_TAG, routes);

    }

    @Override
    public Loader<List<GtfsRealtime.FeedEntity>> onCreateLoader(int i, Bundle bundle) {
        return new VehiclePositionLoader(this);
    }

    @Override
    public void onLoadFinished(Loader<List<GtfsRealtime.FeedEntity>> loader, List<GtfsRealtime.FeedEntity> feedEntities) {
        Log.d(LOG_TAG, "List Size Recieved by Loader : " + feedEntities.size());
        adapter.setmDataset(feedEntities);
        adapter.notifyDataSetChanged();
    }

    @Override
    public void onLoaderReset(Loader<List<GtfsRealtime.FeedEntity>> loader) {
        adapter.setmDataset(null);
        adapter.notifyDataSetChanged();
    }

}
